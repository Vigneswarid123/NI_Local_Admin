<div class="dashboard_bg">
  <app-header></app-header>
  <div class="container-fluid pt64">
  <div class="row">
  <div class="col-2 col-sm-2 col-md-2 col-lg-2 col-xl-2 collapse show d-md-flex bg-dark px-0 min-vh-100 nav" id="sidebar">
  <app-left-panel class="w-100"></app-left-panel>
  </div>
  
  
  
  <div class="contentpanel_bg col-9 pt-3">
  <div>
  
  <!-- edit Terms start -->
  
  <div >
  <div class="row">
  <div class="col-xs-12 col-sm-12 col-md-12 col-md-offset-4">
  <div class="panel panel-default">
  <div class="panel-heading">
  <h3 class="panel-title"></h3>
  </div>
  <div class="panel-body">
    <form [formGroup]="addTermForm" (ngSubmit)="OnSubmit()">
      <div>
        <div class="row pb-4">
          <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
            <label for="rule">Term</label>
            <input type="text" [(ngModel)]="getTermDetailsArray.MIT_NAME" class="form-control" placeholder="Enter term"
            formControlName="MIT_NAME">   
            <small class="errormessage" *ngIf="submitted && addTermForm.controls.MIT_NAME.hasError('required')">
              Term is required
            </small>
            <small class="errormessage" *ngIf="submitted && addTermForm.controls.MIT_NAME.hasError('maxlength')">
              Maximum limit exceeded
            </small> 
           </div>
      </div> 



      <div class="row pb-4">
        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
          <label style="color: white;">
            Type
          </label>
          <select class="Dropdown" formControlName="MIT_TYPE" [(ngModel)]="getTermDetailsArray.MIT_TYPE" (change)="onChange($event.target.value)">
              <option value="">Select Type</option>
              <option  *ngFor="let list of xmlItems" [value]="list.id" >{{list.name}}</option>
            </select> 

          <small class="errormessage" *ngIf="submitted && addTermForm.controls.MIT_TYPE.hasError('required')">
              Type is required 
          </small>
      </div>
      </div>

      <ng-container *ngIf="showOptions" formArrayName="incentivetermsoptions">
       
        <div class="row pb-4">
          <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">    
            <label style="color: white;">
              Terms options
            </label>   
          </div>  
          
          <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4" >
          <span>                          
             <span *ngFor="let dropdownitem of incentivetermsoptions().controls;let i=index" [formGroupName]="i">

              <div class="row pb-4"  *ngIf="addTermForm.get('incentivetermsoptions').value[i].action != 'D'">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-9"> 
                  <div style="float: left;"> 
                    <span>         
                     <input style="font-size: 12px; height: 30px;" type="text" class="form-control" formControlName="to_Name"> 
                    </span> 
                  </div>
                  <div> 
                    <a class="ml-1" *ngIf='incentivetermsoptions().length > 1'><img class="closeimg" src="../../assets/Images/remove-icon.png" title="DELETE"  (click)="removeGroup(i)"></a>
                 </div>
                </div>
               
              </div>
              <img style="cursor: pointer;position: absolute;" (click)="addGroup()" title="Add TermsOptions" src="assets/Images/circle_icon.png">
            </span>
           </span>
           
          </div>
        </div>

      </ng-container>

      <div class="row pb-4">
        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
          <label> Display Name</label>
          <input type="text"  [(ngModel)]="getTermDetailsArray.MIT_DISPLAYNAME" class="form-control" maxlength="500" formControlName="MIT_DISPLAYNAME" autofocus>
          <small class="errormessage" *ngIf="submitted && addTermForm.controls.MIT_DISPLAYNAME.hasError('required')">Display name is required</small>
          <small class="errormessage" *ngIf="submitted && addTermForm.controls.MIT_DISPLAYNAME.hasError('maxlength')">
            Maximum limit exceeded
          </small>
        </div>
      </div>
      
       <div class="row pb-4">
        <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
          <label> Description</label>
          <textarea class="form-control" [(ngModel)]="getTermDetailsArray.MIT_DESCRIPTION" maxlength="500" formControlName="MIT_DESCRIPTION" autofocus rows="5" cols="10">                             
          </textarea>
           <small class="errormessage" *ngIf="submitted && addTermForm.controls.MIT_DESCRIPTION.hasError('required')">
          Description is required
        </small> 
        <small class="errormessage" *ngIf="submitted && addTermForm.controls.MIT_DESCRIPTION.hasError('maxlength')">
          Maximum limit exceeded
        </small> 
         </div>
      </div> 

      
       
    <div class="row pb-4">
      <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
        <label for="getTermDetailsArray.MIT_REFERENCE">Reference </label>                        
          <input type="textbox" class="form-control" maxlength="500" [(ngModel)]="getTermDetailsArray.MIT_REFERENCE" formControlName="MIT_REFERENCE" autofocus  >
      
          <small class="errormessage" *ngIf="submitted && addTermForm.controls.MIT_REFERENCE.hasError('required')">
            Reference is required
          </small> 
          <small class="errormessage" *ngIf="submitted && addTermForm.controls.MIT_REFERENCE.hasError('maxlength')">
            Maximum limit exceeded
          </small> 
      </div>
     </div>

     <div class="row pb-4">
      <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6">
        <label class="dropdwnlabel">
          Frequency
        </label>
        <select class="Dropdown" formControlName="MIT_FREQUENCY" [(ngModel)]="getTermDetailsArray.MIT_FREQUENCY">
            <option value="">Select Frequency Type</option>
            <option value="1" >Daywise</option>
            <option value="2" >Monthly</option>
            <option value="3" >Yearly</option>
        </select> 

        <small class="errormessage" *ngIf="submitted && addTermForm.controls.MIT_FREQUENCY.hasError('required')">
           Frequency type is required 
        </small>
    </div>
    </div>

    
    <div class="row pb-4">
      <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 mt-3">
        <label for="getTermDetailsArray.MIT_ISDEALERSPECIFIC">Is Dealer Specific </label>
      <label class="switch">
        <input class="switch-input" type="checkbox" [checked]="switchResult == 'Y'"  formControlname="MIT_ISDEALERSPECIFIC" (change)="getDealerSpecificVal($event)" >
        <span class="switch-label" data-on="Yes" data-off="No"></span>
        <span class="switch-handle"></span>
      </label>
      </div>
    </div>

    <div class="row pb-4 ">
      <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 mt-3">
        <label for="MIT_STATUS">Status </label>
        <span style="margin-left: 52px;"></span>
          <input class="form-check-input" type="radio" value="Y" name="MIT_STATUS" [(ngModel)]="getTermDetailsArray.MIT_STATUS" formControlName="MIT_STATUS"/>
          <label class="Active" >Active</label>
          <span style="margin-left: 45px;"></span>
          <input class="form-check-input" type="radio" value="N" name="MIT_STATUS" [(ngModel)]="getTermDetailsArray.MIT_STATUS" formControlName="MIT_STATUS"/>                                     
          <label class="InActive"> In-Active </label>   
          
          <div>
            <small class="errormessage" *ngIf="submitted && addTermForm.controls.MIT_STATUS.hasError('required')">
              Status is required
            </small>
          </div>
       </div>
  </div> 

    <div class="col-lg-12 pt-lg-5 pl-lg-4">
      <div class="row">
          <div class="col-lg-2">
              <button type="submit" class="savebutton">Save</button>
          </div>
          <div class="col-lg-2">
              <button type="submit" class="savebutton" [routerLink]="['/incentiveTerms']">Cancel</button>
          </div>
      </div>
  </div>

      <!-- <pre style="color: white;">{{addTermForm?.value|json}}</pre> -->

    </div>  
    </form>
  
  </div>
  </div>
  </div>
  </div>
  </div>
  
  
  
  
  <!-- edit Terms end -->
  
  
  </div>
  </div>
  
  
  
  </div>
  </div>
  </div>